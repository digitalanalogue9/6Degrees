var labelType,useGradients,nativeTextSupport,animate;
(function(){var ua=navigator.userAgent,iStuff=ua.match(/iPhone/i)||ua.match(/iPad/i),typeOfCanvas=typeof HTMLCanvasElement,nativeCanvasSupport=typeOfCanvas=="object"||typeOfCanvas=="function",textSupport=nativeCanvasSupport&&typeof document.createElement("canvas").getContext("2d").fillText=="function";labelType=!nativeCanvasSupport||textSupport&&!iStuff?"Native":"HTML";nativeTextSupport=labelType=="Native";useGradients=nativeCanvasSupport;animate=!(iStuff||!nativeCanvasSupport)})();
var Log={elem:false,write:function(text){if(!this.elem)this.elem=document.getElementById("log");this.elem.innerHTML=text;this.elem.style.left=500-this.elem.offsetWidth/2+"px"}};$(function(){var json=null;json=getDemoJson();buildGraph(json)});
function buildGraph(json){var rgraph=new $jit.RGraph({"injectInto":"infovis","background":{"CanvasStyles":{"strokeStyle":"#555","shadowBlur":50,"shadowColor":"#ccc"}},Node:{"overridable":true,"color":"#cc0000"},Edge:{"overridable":true,"color":"#cccc00"},interpolation:"polar",transition:$jit.Trans.Elastic.easeOut,duration:3500,fps:30,levelDistance:100,onBeforePlotLine:function(adj){if(!adj.data.$lineWidth)adj.data.$lineWidth=Math.random()*5+1},onBeforeCompute:function(node){Log.write("centering "+
node.name+"...");var html="<h4>"+node.name+"</h4><b>Connections:</b>";html+="<ul>";node.eachAdjacency(function(adj){var child=adj.nodeTo;html+="<li>"+child.name+"</li>"});html+="</ul>";$jit.id("inner-details").innerHTML=html},onCreateLabel:function(domElement,node){domElement.innerHTML=node.name;domElement.onclick=function(){rgraph.onClick(node.id,{hideLabels:false,onComplete:function(){Log.write("done")}})};var style=domElement.style;style.cursor="pointer";style.fontSize="0.8em";style.color="#fff"},
onPlaceLabel:function(domElement,node){var style=domElement.style;var left=parseInt(style.left);var w=domElement.offsetWidth;style.left=left-w/2+"px"}});rgraph.loadJSON(json,1);rgraph.refresh();rgraph.controller.onBeforeCompute(rgraph.graph.getNode(rgraph.root));Log.write("done")}
function getDemoJson(){var json=[{"id":"node0","name":"node0 name","data":{"$dim":16.759175934208628,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node1","data":{"weight":3}},{"nodeTo":"node2","data":{"weight":3}},{"nodeTo":"node3","data":{"weight":3}},{"nodeTo":"node4","data":{"$dim":25,"weight":1}},{"nodeTo":"node5","data":{"weight":1}}]},{"id":"node1","name":"node1 name","data":{"$dim":13.077119090372014,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node0","data":{"weight":3}},
{"nodeTo":"node2","data":{"weight":1}},{"nodeTo":"node3","data":{"weight":3}},{"nodeTo":"node4","data":{"weight":1}},{"nodeTo":"node5","data":{"weight":1}}]},{"id":"node2","name":"node2 name","data":{"$dim":24.937383149648717,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node0","data":{"weight":3}},{"nodeTo":"node1","data":{"weight":1}},{"nodeTo":"node3","data":{"weight":3}},{"nodeTo":"node4","data":{"weight":3}},{"nodeTo":"node5","data":{"weight":1}}]},{"id":"node3","name":"node3 name",
"data":{"$dim":10.53272740718869,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node0","data":{"weight":3}},{"nodeTo":"node1","data":{"weight":3}},{"nodeTo":"node2","data":{"weight":3}},{"nodeTo":"node4","data":{"$dim":25,"weight":1}},{"nodeTo":"node5","data":{"weight":3}}]},{"id":"node4","name":"node4 name","data":{"$dim":5.375434703776735,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node0","data":{"weight":1}},{"nodeTo":"node1","data":{"weight":1}},{"nodeTo":"node2",
"data":{"weight":3}},{"nodeTo":"node3","data":{"weight":1}},{"nodeTo":"node5","data":{"weight":3}}]},{"id":"node5","name":"node5 name","data":{"$dim":12.26403873194912,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node0","data":{"weight":1}},{"nodeTo":"node1","data":{"weight":1}},{"nodeTo":"node2","data":{"weight":1}},{"nodeTo":"node3","data":{"weight":3}},{"nodeTo":"node4","data":{"weight":3}}]},{"id":"node6","name":"node6 name","data":{"$dim":12.26403873194912,"some other key":"some other value"},
"adjacencies":[{"nodeTo":"node0","data":{"weight":1}}]},{"id":"node7","name":"node7 name","data":{"$dim":12.26403873194912,"some other key":"some other value"},"adjacencies":[{"nodeTo":"node6","data":{"weight":1}}]}];return json};